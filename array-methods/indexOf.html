<script src="../tinytest.js"></script>
<script>
  'use strict'
  // Main Objective
  //The indexOf() method returns the first index at which a given element can be found in the array, or -1 if it is not present.

  // Prototype function 
  // function indexOf(array, searchElement, indexFrom) { 
  //   let indexToStart = 0;

  //   if (arguments.length > 2) {
  //     indexToStart = indexFrom;
  //   }

  //   for (let i = indexToStart; i < array.length; i++ ) {
  //     if(searchElement === array[i]) {
  //       return i;
  //     }
  //   }
  //   return -1;

  // }


  // Function signature 
  //indexOf(searchElement, [, fromIndex]);

  // Function Parameters 
  // searchELement -> Element to locate in the array
  // fromIndex -> The index to start the search at.

  // Return value 
  // The first index of the element in the array; -1 if not found.



  // Requirements 

  // 1. It should compares searchElement to the elements of the array in ascending order(starting from 0 index by default) using the Strict Equality Comparison returning the element index that pass the test.
  // 2. It should return -1, if no element pass the comparisson equality test.
  // 3. If fromIndex is provided the array search should start from index = fromIndex.
  // 4. If the fromIndex is greater than or equal to arrays length, -1 is returned ( array will not be searched ) 
  // 5. If the provided fromIndex value is a negative number, its taken as the offset from the end of the array. (array.length - fromIndex)
  // 6. If the provided index is 0, the whole array will be searched. Default is 0.
  // 7. If the the provided fromIndex is negative and the calculated index is less than 0 (arraylength - fromIndex), the whole array will be searched.


  function indexOf(array, searchElement, fromIndex = 0) {
    if (fromIndex) {
      if (fromIndex < 0) { // negative value
        if (array.length - Math.abs(fromIndex) < 0) {
          fromIndex = 0;
        } else {
          fromIndex = array.length - Math.abs(fromIndex);
        }
      }
    }

    for (let i = fromIndex; i < array.length; i++) {
      if (searchElement === array[i]) {
        return i;
      }
    }
    return -1;
  }


  tests({

    '1. It should compares searchElement to the elements of the array in ascending order(starting from 0 index by default) using the Strict Equality Comparison returning the element index that pass the test.': function () {
      let indexOfReturnedValue = indexOf([1, 2, 3, 4, 5, 6, 7, 8, 9, 5], 5);
      eq(indexOfReturnedValue, 4);
    },

    '2. It should return -1, if no element pass the comparisson equality test.': function () {
      let indexOfReturnedValue = indexOf([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], 11);
      eq(indexOfReturnedValue, -1);
    },

    '3. If fromIndex is provided the array search should start from index = fromIndex.': function () {
      let indexOfReturnedValue = indexOf([1, 2, 3, 4, 5, 6, 7, 8, 9, 5], 5, 5);
      eq(indexOfReturnedValue, 9);
    },

    '4. If the fromIndex is greater than or equal to arrays length, -1 is returned ( array will not be searched )': function () {
      let indexOfReturnedValue = indexOf([1, 2, 3], 2, 4);
      eq(indexOfReturnedValue, -1);
    },


    '5. If the provided fromIndex value is a negative number, its taken as the offset from the end of the array. (array.length - fromIndex)': function () {
      let indexOfReturnedValue = indexOf([3, 2, 3, 4, 3], 3, -1);
      eq(indexOfReturnedValue, 4);
    },


    '6. If the provided index is 0, the whole array will be searched. Default is 0.': function () {
      let indexOfReturnedValue = indexOf([1, 2, 3, 4, 3], 3, 0);
      eq(indexOfReturnedValue, 2);

    },


    '7. If the the provided fromIndex is negative and the calculated index is less than 0 (arraylength - fromIndex), the whole array will be searched.': function () {
      let indexOfReturnedValue = indexOf([1, 2, 3, 4, 3, 5], 5, -10);
      eq(indexOfReturnedValue, 5);
    },



  });
</script>